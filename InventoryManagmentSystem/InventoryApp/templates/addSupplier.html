{% extends 'base.html' %}

{% block body %}



<div class="form-container">
    <div class="form-card">
        <!-- Form Header -->
        <div class="form-header">
            <i class="fas fa-truck"></i>
            <h1>Add New Supplier</h1>
            <p>Register a new supplier for your inventory</p>
        </div>

        <!-- Form Body -->
        <div class="form-body">
            <!-- Success/Error Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        <i class="fas fa-{% if message.tags == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
                        <span>{{ message }}</span>
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post" action="{% url 'addSupplier' %}" id="supplierForm">
                {% csrf_token %}
                
                <!-- Basic Information Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-info-circle"></i>
                        Supplier Information
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="name">
                            <i class="fas fa-building"></i>
                            Supplier Name
                            <span class="required">*</span>
                        </label>
                        <div class="input-group">
                            <i class="fas fa-user-tie input-icon"></i>
                            <input type="text" 
                                   class="form-control" 
                                   id="name" 
                                   name="name" 
                                   maxlength="100"
                                   placeholder="e.g., ABC Suppliers Ltd." 
                                   required />
                        </div>
                        <div class="helper-text">
                            <i class="fas fa-info-circle"></i>
                            Enter the full name of the supplier company or individual
                        </div>
                    </div>
                </div>

                <!-- Contact Details Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-address-book"></i>
                        Contact Details
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="contact_number">
                                <i class="fas fa-phone"></i>
                                Contact Number
                            </label>
                            <div class="input-group">
                                <i class="fas fa-mobile-alt input-icon"></i>
                                <input type="tel" 
                                       class="form-control" 
                                       id="contact_number" 
                                       name="contact_number" 
                                       maxlength="20"
                                       placeholder="+91 98765 43210" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="email">
                                <i class="fas fa-envelope"></i>
                                Email Address
                            </label>
                            <div class="input-group">
                                <i class="fas fa-at input-icon"></i>
                                <input type="email" 
                                       class="form-control" 
                                       id="email" 
                                       name="email" 
                                       placeholder="supplier@example.com" />
                            </div>
                        </div>
                    </div>

                    <div class="helper-text">
                        <i class="fas fa-info-circle"></i>
                        Provide at least one contact method for communication
                    </div>
                </div>

                <!-- Address Section -->
                <div class="form-section">
                    <div class="section-title">
                        <i class="fas fa-map-marker-alt"></i>
                        Address Details
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="address">
                            <i class="fas fa-location-arrow"></i>
                            Full Address
                        </label>
                        <textarea class="form-control" 
                                  id="address" 
                                  name="address" 
                                  rows="4"
                                  placeholder="Enter complete address including street, city, state, and pincode..."></textarea>
                        <div class="helper-text">
                            <i class="fas fa-info-circle"></i>
                            Optional: Add the complete address for shipping and correspondence
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <a href="{% url 'inventory' %}" class="btn btn-secondary">
                        <i class="fas fa-times"></i>
                        Cancel
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Add Supplier
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Form validation feedback
    document.getElementById('supplierForm').addEventListener('submit', function(e) {
        const form = e.target;
        if (!form.checkValidity()) {
            e.preventDefault();
            e.stopPropagation();
            
            // Highlight invalid fields
            const invalidFields = form.querySelectorAll(':invalid');
            invalidFields.forEach(field => {
                field.style.borderColor = 'var(--danger-color)';
            });
        }
    });

    // Remove error styling on input
    document.querySelectorAll('.form-control').forEach(input => {
        input.addEventListener('input', function() {
            this.style.borderColor = '';
        });
    });

    // Phone number formatting (India format)
    const phoneInput = document.getElementById('contact_number');
    phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 10) {
            value = value.substring(0, 10);
        }
        e.target.value = value;
    });

    // Email validation
    const emailInput = document.getElementById('email');
    emailInput.addEventListener('blur', function() {
        if (this.value && !this.validity.valid) {
            this.style.borderColor = 'var(--danger-color)';
        }
    });
</script>

{% endblock body %}