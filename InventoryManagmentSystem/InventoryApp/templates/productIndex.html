{%extends 'base.html'%}

{% block body%}
<body>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Page Header with Action Buttons -->
        <div class="page-header">
            <h1 class="page-title">Product Management</h1>
            <div class="action-buttons">
                <a href="{%url 'createProduct'%}" class="btn-custom btn-primary-custom">
                    <i class="fas fa-plus"></i>
                    Add Product
                    </a>
                <a href="{% url 'uplodeCsv' %}" class="btn-custom btn-success-custom">
                    <i class="fas fa-file-import"></i>
                    Import CSV
                </a>
                <button class="btn-custom btn-secondary-custom">
                    <i class="fas fa-file-export"></i>
                    Export List
                </button>
            </div>
        </div>

        <!-- Search and Filter Section -->
        <div class="filter-section">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search products by name or category...">
                </div>
            </div>
        </div>

        <!-- Products Table Section -->
        <div class="table-section">
            <div class="table-header">
                <h2 class="table-title">All Products</h2>
                <span class="table-count">
                    <i class="fas fa-box"></i> {{product_count}}
                </span>
            </div>

            <div class="table-container">
                <table class="products-table">
                    <thead>
                        <tr>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Created Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for prd in products%}
                        <tr>
                            <td><strong>{{prd.name}}</strong></td>
                            <td><span class="category-badge category-{{ prd.category|slugify }}">{{prd.category}}</span></td>
                            <td>â‚¹{{prd.price}}</td>
                            <td>{{prd.date_added}}</td>
                            <td>
                                <div class="action-buttons-cell">
                                    <a href="{% url 'productEdit' pk=prd.id %}" class="btn-action btn-edit" title="Edit">
                                        <i class="fas fa-pencil-alt"></i>
                                    </a>
                                    <a href="{% url 'product delete' pk=prd.id %}" 
                                        class="btn-action btn-delete" 
                                        title="Delete"
                                        onclick="return confirm('Are you sure you want to delete this product?');">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Simple search functionality
        document.querySelector('.search-input').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('.products-table tbody tr');
            
            rows.forEach(row => {
                const productName = row.querySelector('td:first-child').textContent.toLowerCase();
                const category = row.querySelector('.category-badge').textContent.toLowerCase();
                
                if (productName.includes(searchTerm) || category.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
{%endblock body%}
